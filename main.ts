//% weight=70 icon="\u302a" color=#FF0000 block="IR"
namespace remocon {
    let r = 0
    let remocon :number

    const list =[
        3464,1736, 426, 447, 386,1248, 419, 447, 386, 447,
         386, 447, 386, 447, 387, 447, 385, 448, 392, 441,
         386, 447, 386, 447, 386, 448, 386, 447, 386,1247,
         420, 447, 386, 447, 387, 447, 386, 447, 386, 448,
         390, 444, 385, 447, 386, 448, 386, 447, 386,1246,
         421, 447, 386, 448, 385, 448, 386, 447, 386, 447,
         386, 448, 391, 442, 385, 448, 385,1248, 419, 448,
         386,1247, 420,1247, 420,1248, 419,1247, 420, 447,
         386, 447, 386,1247, 420, 447, 386,1247, 420,1248,
         419,1246, 427,1241, 421, 447, 386,1247, 420
        ]

        /*
        //1612
    const list1612 =[
        3510,1688, 472, 364, 470,1192, 474, 364, 468, 396,
         437, 367, 467, 365, 467, 397, 437, 397, 436, 368,
         464, 397, 438, 364, 468, 397, 436, 367, 467,1193,
         473, 367, 467, 366, 465, 398, 437, 365, 466, 365,
         469, 397, 437, 364, 474, 363, 464, 398, 437,1194,
         473, 368, 466, 365, 467, 398, 436, 398, 437, 364,
         468, 362, 472, 397, 436, 366, 471,1188, 476, 364,
         467,1195, 474,1193, 473,1193, 473,1195, 473, 365,
         466, 399, 436,1194, 472, 397, 437,1194, 472,1195,
         472,1172, 494,1195, 472, 366, 470,1195, 470
        ]
    
    //1613
    const list1613 =[
        3516,1691, 473, 366, 438,1222, 476, 365, 467, 368,
         466, 365, 468, 365, 471, 364, 467, 367, 467, 365,
         469, 363, 470, 365, 468, 366, 468, 364, 469,1192,
         475, 369, 465, 367, 466, 364, 471, 364, 468, 367,
         466, 367, 467, 365, 469, 363, 469, 368, 465,1194,
         475, 364, 470, 365, 466, 367, 467, 368, 467, 369,
         464, 365, 467, 369, 465, 367, 466,1195, 474, 366,
         466,1193, 475,1193, 472,1192, 476,1192, 474, 368,
         466, 367, 466,1194, 472, 368, 466,1194, 471,1195,
         474,1199, 470,1193, 473, 368, 466,1193, 474
        ]
        */
        //  send()

    //% blockId=send block="信号を送信"
    export function send(list: number[]): void {
        for (let i = 0; i <= list.length - 1; i++) {
            // Generate flashing signal
            if (i % 2 == 1) {
                // LED turns off
                control.waitMicros(list[i])
                } 
            else {
                // LED flashes at 38 kHz cycle
                r = list[i]
                while (r > 26)
                    pins.digitalWritePin(DigitalPin.P0, 1)
                    control.waitMicros(2)
                    pins.digitalWritePin(DigitalPin.P0, 0)
                    r = r - 26
                }
            }
        }
    
}
